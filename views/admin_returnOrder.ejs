<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Return Order</title>
    <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/admin_orders.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <script src="/js/admin_returnOrder.js" defer></script>
    <script src="/js/admin_common.js" defer></script>

</head>

<body>
    <div class="container">

        <h2>Return Request</h2>

        <div class="d-flex flex-column">
            <label for="">Return Reason: </label>

            <textarea name="" readonly id=""><%= order.return.reason %></textarea>

            <label for="proofs">Proof of Images: </label>

            <div class="row justify-content- ">

                <% order.return.proof.forEach(image=> { %>

                    <div class="col-4 p-4" style="border: 1px solid black; border-radius: 10px;">


                        <img class="col-12" src="/<%= image %>" alt="">

                    </div>


                    <% }); %>


                        <% if (order.return.status==='requested' ) {%>


                            <div class="d-flex mt-4">
                                <button class="btn btn-danger" value="<%= order._id %>" id="rejectReturnRequest">Reject
                                    Request</button>
                                <button class="btn btn-success ms-3" value="<%= order._id %>"
                                    id="approveReturnRequest">Approve Request</button>

                            </div>

                            <% }else if(order.return.status==='rejected' ) {%>

                                <span class="mt-4 fw-bold text-danger"> Return Request Rejected.</span>


                                <% }else if(order.return.status==='approved' ) {%>

                                    <span class="mt-4 fw-bold text-success"> Return Request Approved and Return
                                        Authorization Details sent to customer.
                                    </span>


                                    <span class="fs-5 mt-4">Return Label: <span class="fw-bold">
                                            <%= order.return.returnAuthorization.returnLabel %>
                                        </span></span>


                                    <button class="btn btn-warning mt-3" value="<%= order._id %>"
                                        id="pickedReturnPackage">Package Picked Up</button>






                                    <% }else if(order.return.status==='picked up' ) {%>

                                        <span class="my-4 fw-bold text-success"> Return Package has been Picked
                                            up</span>

                                        <% if(order.paymentMethod==='COD' ) {%>

                                            <input type="hidden"
                                                value="<%= order.return.bankAccountDetails.holderName %>"
                                                id="holderName">

                                            <input type="hidden"
                                                value="<%= order.return.bankAccountDetails.accountNumber %>"
                                                id="accountNumber">

                                            <input type="hidden" value="<%= order.return.bankAccountDetails.ifsc %>"
                                                id="ifsc">
                                            <input type="hidden" value="<%= order.totalAmount %>" id="totalAmount">




                                            <button class="btn btn-success" value="<%= order._id %>" id="refundCODReturnPayment">Refund
                                                Payment</button>


                                                

                                            <%}else {%>

                                                <button value="<%= order._id %>" class="btn btn-success" id="refundReturnPayment">Refund
                                                    Payment</button>

                                                <% } %>

                                                <% }else if(order.return.status==='refunded' ) {%>

                                                    <span class="mt-4 fw-bold text-success"> Return Refund Successful.</span>

                                                    <button value="<%= order._id %>" class="btn btn-primary mt-3" id="completeReturnProcess">Complete Return</button>





                                                    <% }else{ %>

                                                        <span class="my-4 fw-bold text-success"> Return Package has been
                                                            Returned
                                                            Successfully.</span>


                                                        <% } %>




            </div>








        </div>


    </div>






</body>

</html>